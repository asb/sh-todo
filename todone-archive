#!/bin/sh
# Part of sh-todo:
# https://github.com/asb/sh-todo
#
# Remove all DONE lines from $TODO_F. All such lines will already have been 
# added to $TODONE_F
set -e

. ~/.sh-todo

echo -n > "$TODO_F.tmp"

while read -r LINE; do
  if [ "${LINE#$DONE_PREFIX}" != "$LINE" ]; then
    # use printf to ensure backslash escapes are interpreted
    printf "â€¢ $BEGIN_DONE${LINE#$DONE_PREFIX}$END_DONE\n"
  else
    echo $LINE >> "$TODO_F.tmp"
  fi;
done < "$TODO_F"

mv "$TODO_F.tmp" "$TODO_F"
